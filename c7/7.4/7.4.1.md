## 7.4.1 将Ajax的Hello, World和PHP的Hello, World相比较
&emsp;&emsp;引子到此为止，接下来我们通过具体的应用开发来体验Ajax开发吧。<br>
&emsp;&emsp;下面要介绍的是很简单的Hello,World应用。另外，因为接下来要和服务器进行合作，所以使用PHP（PHP：Hypertext Preprocessor）作为服务器端技术，但是Ajax对服务器端使用的技术是没有限制的，所以也可以使用例如ASP.NET或者JSP（JavaServer Pages）或者是servlet、Ruby这样的技术。

**Note 构建服务器端环境**<br>
&emsp;&emsp;关于使用PHP的环境配置流程，请参考作者网站的「服务器端技术的校舍-WINGS（http://www.wings.msn.to/ ）」——「服务器端环境配置」等。

&emsp;&emsp;为了理解传统类型的应用和Ajax应用的差异，我们先来看下只使用了PHP来实现的Hello,World应用吧。<br>
&emsp;&emsp;另外，再次强调下，本书的目的不是用来理解PHP的，所以只是粗略地介绍下代码的流程，不会详细介绍。关于语法等详细说明，请参考『自学PHP 第3版』『10天了解PHP入门教室 第4版』（翔泳社）等技术书籍。

**●清单7-22 hello.php**
![image](../../images/c7/スクリーンショット&#32;2019-04-14&#32;午後2.39.03.png)
![image](../../images/c7/スクリーンショット&#32;2019-04-14&#32;午後2.39.17.png)
> 名字：  
> 发送  
> // 中断处理3秒（用来模拟服务器处理的延迟）  
> '你好'  '先生！'  
> JavaScript完全学习教程  
> 名字：山田太郎  发送  
> JavaScript完全学习教程  
> 名字：山田太郎  发送  
> 你好，山田太郎先生！

**●根据输入的名字，生成问候消息**

##### 【389页】
&emsp;&emsp;在服务器上配置好hello.php之后，试着通过浏览器来访问吧。在输入框输入名字之后点击[发送]按钮。经过数秒后，在表单的底部显示了「你好，〇〇先生！」这样的消息。<br>
&emsp;&emsp;请注意以下这2点。

**（1）显示结果时，页面整体被替换了**<br>
&emsp;&emsp;原本这里需要更新的只有「你好，〇〇先生！」这个消息部分。但是，在传统类型的Web应用中，即使是替换页面的局部，也需要刷新页面整体。结果，客户端／服务器间的流量自然会有很多，替换时还会产生画面的闪烁。另外，在输入框中输入的字符串也会回到初始状态（当然，也可以维持输入值，不过这就需要服务器端做某些处理了）。

**（2）在和服务器端通信的过程中，客户端无法操作**<br>
&emsp;&emsp;传统类型的Web应用是同步通信的。也就是说，客户端和服务器端的处理是同步的，客户端在向服务器发送请求之后，在服务器端响应之前无法进行后续的操作。

&emsp;&emsp;因为有上述这样的问题点，所以我们使用Ajax技术来改写清单7-22的内容吧。要实现Ajax应用，大致需要下面2步。

- 在客户端中运行的文件（HTML文件）
- 在服务器端运行的文件（在这里是PHP文件）

**●清单7-23 hello_ajax.html（上）／hello_ajax.js（中）／hello_ajax.php（下）**
![image](../../images/c7/スクリーンショット&#32;2019-04-14&#32;午後3.29.01.png)
> 名字：  
> 发送

##### 【390页】
![image](../../images/c7/スクリーンショット&#32;2019-04-14&#32;午後3.30.32.png)
> // 通信结束时  
> // 通信成功时  
> // 通信失败时  
> '服务器发生了错误。'  
> // 通信结束之前  
> '通信中……'  
> // 开始和服务器进行异步通信  
> // 中断处理3秒（用来模拟服务器处理的延迟）  
> '你好，'  '先生！'  
> JavaScript完全学习教程  
> 名字：山田太郎  发送  
> 通信中……  
> JavaScript完全学习教程  
> 名字：山田太郎  发送  
> 你好，山田太郎先生！

**●根据输入的名字，生成问候消息**

&emsp;&emsp;之后再详细介绍代码，首先，我们在将文件部署到服务器上之后通过浏览器来运行。<br>
&emsp;&emsp;只看运行结果，可能会觉得和之前的结果没有变化。但是，仔细观察动作的话，有以下不同点。

- 显示结果时，只替换了页面的「必要部分」  
- 在和服务器通信的过程中，客户端也可以继续操作

##### 【391页】
![image](../../images/c7/スクリーンショット&#32;2019-04-14&#32;午後3.50.46.png)
> 客户端  
> ①输入名字之后，点击[发送]按钮（触发点击事件）  
> HTML + JavaScript（hello_ajax.html／hello_ajax.js）  
> ④将接收到的消息嵌到页面的底部（只替换必要的部分）  
> ②发送名字  
> ③响应服务器端生成的问候消息  
> Web服务器  
> PHP脚本（hello_ajax.php）

**●本示例中的处理流程**

**■Ajax的3个优点**<br>
&emsp;&emsp;这里，我们再次总结一下Ajax技术的优点。

**（1）改善操作**<br>
- 消除通信时产生的页面闪烁
- 在服务器处理过程中客户端也可以继续处理

**（2）提升性能**<br>
- 因为只需要更新页面的局部，所以可以将通信量控制在最小范围内
- 不需要等待服务器处理结束，提升了用户体验的速度。

**（3）提升了开发的生产性／互通性**<br>
- 可以仅使用浏览器标准的技术就可以构建丰富的用户界面（不需要学习新的技术）
- 不需要特殊的插件，所以很容易导入

&emsp;&emsp;并且，使用Ajax还能够很容易地实现传统技术不能（难以）实现的功能。例如，很难实现定期自动保存博客投稿表单中的正在编辑的内容（虽然不是不能够实现，但是自动保存时会中断用户的操作，所以反而会降低操作性）。但是，使用Ajax技术，可以使用户意识不到保存的过程，所以很容易实现这样的功能。