## 7.4.3 在Ajax应用中操作结构化数据
&emsp;&emsp;目前为止，介绍了服务器响应的数据是纯文本的例子。但是，如果是更加复杂的应用，不仅仅有这样单纯的数据，还有需要处理数组或者对象这样的结构化的数据的情况。这里，我们就来介绍下在Ajax应用中操作这样的结构化的数据的方法。

**■Ajax中可以使用的数据形式**<br>
&emsp;&emsp;通过Ajax（Asynchronous JavaScript + XML）这个名字，可能会认为「Ajax中处理的数据必须是XML」。但是，在Ajax中XML不是必须的。反而近来Ajax通信中不怎么使用XML了。这是因为有以下理由。

- 因为有标签，所以数据量更大
- 容易导致用于操作数据的DOM编程的代码变得冗长

&emsp;&emsp;因此近年来Ajax通信中常用的是称为JSON（JavaScript Object Notation）的形式。例如下面是将书籍信息使用JSON形式来表示的例子。
![image](../../images/c7/スクリーンショット&#32;2019-04-15&#32;午後5.45.25.png)
![image](../../images/c7/スクリーンショット&#32;2019-04-15&#32;午後5.45.33.png)
> "Java口袋参考手册"  
> "技术评论社"

##### 【398页】
&emsp;&emsp;我们可以发现，JSON是基于JavaScript的对象字面量的数据形式。这样有以下优点。

- 使用JSON.parse方法（3.7.3），就可以直接作为对象读取
- 和XML相比，数据大小更小

&emsp;&emsp;另外，不仅仅是JavaScript，主要的语言（库）都提供了从对象到JSON形式的转换方法，这已经成为了Ajax技术的一部分了。<br>
&emsp;&emsp;因为只是用作简单的数据交换，所以可以表示的结构是有限制的，但如果只是用于Ajax，基本上没有这样的限制。<br>

**■实现「Hatena书签检索功能」**<br>
&emsp;&emsp;现在开始我们来看下具体的例子吧。这里介绍的是使用「Hatena书签条目信息获取API」（**地址省略……**），并在指定的页面中罗列出书签信息的例子。
![image](../../images/c7/スクリーンショット&#32;2019-04-15&#32;午後8.53.58.png)
> JavaScript完全学习教程  
> 检索  
> 买了一本书  
> 买了一本书  
> 全面介绍  

**●在指定的页面中罗列对应的书签信息**

**Note 什么是Web API**<br>
&emsp;&emsp;像「Hatena书签条目信息获取API」这样，可以通过网络调用的服务称为Web API。使用Web API，可以将网络上公开的高级功能（或者是数据库）像自己的服务一样使用。例如，「Hatena书签条目信息获取API」，可以对Hatena提供的庞大的书签信息就像是自己的数据库一样进行检索，并且可以自由加工得到的结果并显示。
##### 【399页】
![image](../../images/c7/スクリーンショット&#32;2019-04-15&#32;午後9.17.52.png)
> 客户端  
> ①发送请求  
> ⑤响应最终的结果  
> 自己的应用  
> 应用  
> ④读取Web API的返回值，嵌入到响应中  
> ②通过HTTP调用需要的功能  
> ④使用JSON数据响应处理结果  
> Web API的提供方（在示例中是「HatenaAPI」）  
> ③根据传递的参数信息，执行检索等需要的处理

**●什么是Web API**

&emsp;&emsp;那么，我们来看下具体的实现过程吧。

**（1）从服务器端访问「Hatena书签条目信息获取API」（下文称为「HatenaAPI」）**<br>
&emsp;&emsp;首先，需要在PHP脚本中准备用来访问HatenaAPI的代码。

**●清单7-25 bm.php**

●／・■→×÷※
①②③④⑤

7.4.4 使客户端实现跨域通信 -JSONP-
7.4.5 根据跨文档通信的跨域通信
7.5 简单显示异步处理 -Promise对象-
7.5.1 掌握Promise对象的基础
7.5.2 连接异步处理
7.5.3 使多个异步处理并行
7.6 在后台运行JavaScript的代码 -Web Worker-
7.6.1 实现worker线程
7.6.2 启动worker线程

原文|译文|备注
:--|:--|:--